<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte avec Points Manuels et Codes</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }
        #map {
            height: 100%;
            width: 100%;
        }
        #code {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="code">Codes secrets : <span id="codeText"></span></div>


    <script>
        let map;
        let userMarker;

        const locations = [
    { lat: 49.845862, lng: 3.3105502, code: `Quelle couleur est souvent associée à la tristesse dans les expressions ?` },
    { lat: 49.8427706, lng: 3.3040778, code: `Quel fruit est naturellement rouge et contient des petits grains noirs ?` },
    { lat: 49.842574, lng: 3.3045666, code: `Quelle couleur obtient-on en mélangeant du rouge et du bleu ?` },
    { lat: 49.8426743, lng: 3.3045042, code: `Quelle couleur est utilisée pour signaler un danger ou une interdiction ?` },
    { lat: 49.84273, lng: 3.3051859, code: `Quel métal précieux est représenté par une couleur brillante jaune ?` },
    { lat: 49.8432373, lng: 3.3063226, code: `Quelle couleur est souvent utilisée pour représenter l espoir et la nature ?` },
    { lat: 49.8434707, lng: 3.3069497, code: `Quel est le nom de la couleur rose-orangée souvent utilisée pour décrire un coucher de soleil ?` },
    { lat: 49.8434967, lng: 3.3075083, code: `Quelle est la couleur d un zèbre en plus du noir ?` },
    { lat: 49.8439964, lng: 3.3080688, code: `Quelle est la couleur d un ciel couvert d orage ?` },
    { lat: 49.8439146, lng: 3.3090476, code: `Quelle pierre précieuse est connue pour sa couleur verte ?` },
    { lat: 49.8441723, lng: 3.3096095, code: `Comment s appelle la couleur entre le bleu et le vert ?` },
    { lat: 49.8445865, lng: 3.3100726, code: `Quelle couleur associe-t-on souvent à la royauté ou au luxe ?` },
    { lat: 49.8448521, lng: 3.3107193, code: `Quel est le nom de la couleur brun-rougeâtre qu'on voit souvent en automne ?` },
    { lat: 49.845233, lng: 3.3107337, code: `Quel métal a une teinte rosée utilisé dans l électricité ?` },
    { lat: 49.8453534, lng: 3.3111155, code: `Quelle est la couleur d un flamant rose ?` },
    { lat: 49.845624, lng: 3.3115621, code: `Quelle couleur est utilisée pour symboliser la paix dans le monde ?` },
    { lat: 49.846384, lng: 3.3140812, code: `Quelle est la couleur dominante de la lave ?` },
    { lat: 49.8473982, lng: 3.3155669, code: `Quel est le nom de la couleur très foncée entre le bleu et le noir ?` },
    { lat: 49.8476034, lng: 3.3158245, code: `Quelle couleur est utilisée pour représenter le mystère ou la magie dans les contes ?` },
    { lat: 49.8480444, lng: 3.3162853, code: `Comment appelle-t-on une couleur jaune-vert pâle comme celle du citron vert ?` },
    { lat: 49.8480064, lng: 3.3154684, code: `Combien y a-t-il de jours dans une semaine ?` },
    { lat: 49.848196, lng: 3.315195, code: `Quel est le plus grand océan du monde ?` },
    { lat: 49.8476988, lng: 3.3154334, code: `Quel est l animal le plus rapide du monde ?` },
    { lat: 49.846998, lng: 3.3150125, code: `Combien y a-t-il de continents ?` },
    { lat: 49.8468602, lng: 3.3146734, code: `Quel est le plus grand pays du monde ?` },
    { lat: 49.8469686, lng: 3.3144808, code: `Quel est l organe qui fait battre notre cœur ?` },
    { lat: 49.8466224, lng: 3.3143938, code: `Quel est le métal utilisé pour fabriquer les canettes de soda ?` },
    { lat: 49.846727, lng: 3.3140095, code: `Quel est le nom du plus célèbre détective avec une loupe ?` },
    { lat: 49.8471377, lng: 3.3138323, code: `Quelle est la capitale de l Espagne ?` },
    { lat: 49.8475691, lng: 3.3142534, code: `Comment s appelle le scientifique qui a découvert la gravité ?` },
    { lat: 49.8473738, lng: 3.3139308, code: `Combien de dents a un adulte normalement ?` },
    { lat: 49.8473639, lng: 3.3136834, code: `Dans quelle direction se lève le soleil ?` },
    { lat: 49.8471571, lng: 3.3129566, code: `Quel est l état liquide qui sort du robinet ?` },
    { lat: 49.8468735, lng: 3.3123316, code: `Comment s appelle l instrument pour regarder les étoiles ?` },
    { lat: 49.8463581, lng: 3.3115478, code: `Quel animal vit dans une ruche et fait du miel ?` },
    { lat: 49.8454935, lng: 3.310504, code: `Quel est l inverse de jour ?` },
    { lat: 49.8453871, lng: 3.3099984, code: `Combien de côtés a un triangle ?` },
    { lat: 49.8449565, lng: 3.3098044, code: `Quel est l animal qui miaule ?` },
    { lat: 49.8449574, lng: 3.3090751, code: `Dans quel sport tape-t-on dans un ballon avec les pieds ?` },
    { lat: 49.8445096, lng: 3.3083385, code: `Quel est le nom du satellite naturel de la Terre ?` },
    { lat: 49.8443048, lng: 3.3085812, code: `Quel animal porte sa maison sur son dos ?` },
    { lat: 49.8439324, lng: 3.3075028, code: `Comment s'appelle le liquide rouge dans notre corps ?` },
    { lat: 49.8440758, lng: 3.3070916, code: `Quel est l instrument de musique avec des touches noires et blanches ?` },
    { lat: 49.8436069, lng: 3.3069064, code: `Quel est le nom du volcan italien très célèbre ?` },
    { lat: 49.8437619, lng: 3.3063378, code: `Quel est le plus long fleuve du monde ?` },
    { lat: 49.8434692, lng: 3.3061116, code: `Quel est le mois où on fête Halloween ?` },
    { lat: 49.843237, lng: 3.3058944, code: `Quel est le nom du célèbre sorcier avec une cicatrice en forme d éclair ?` },
    { lat: 49.8433144, lng: 3.3054371, code: `Quelle est la planète la plus proche du Soleil ?` },
    { lat: 49.8431857, lng: 3.30503, code: `Quelle est la matière qu on efface avec une gomme ?` },
    { lat: 49.8429963, lng: 3.304959, code: `Combien font 5 x 5 ?` },
    { lat: 49.8428824, lng: 3.3046003, code: `Quel est le nom du plus célèbre monument de Paris ?` },
    { lat: 49.8443092, lng: 3.3088441, code: `Comment s'appelle le continent où se trouve le Brésil ?` },
    { lat: 49.8461678, lng: 3.3115179, code: `Quel animal vit dans les océans, a des tentacules et peut changer de couleur ?` },
    { lat: 49.847522, lng: 3.3155155, code: `Quelle est la langue parlée en Espagne ?` },
    { lat: 49.8468651, lng: 3.3148013, code: `Comment s appelle la machine pour faire des calculs ?` },
    { lat: 49.8436527, lng: 3.3065567, code: `Quel est le nom de la planète rouge ?` },
    { lat: 49.8431048, lng: 3.3056413, code: `Comment s'appelle le héros qui lance des toiles d araignée ?` },
    { lat: 49.8437881, lng: 3.3082326, code: `Combien y a-t-il d'heures dans une journée ?` },
    { lat: 49.8450193, lng: 3.3106025, code: `Quelle est la capitale de l Italie ?` },
    { lat: 49.8426336, lng: 3.3045224, code: `Quel est le nom de la fusée qui a emmené les premiers hommes sur la Lune ?` },
];

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 18,
                center: locations[0], // Centre de la carte sur le premier point
                mapTypeId: 'roadmap'
            });

            addMarkersAndCircles(locations);

            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(showPosition, showError, { enableHighAccuracy: true });
            } else {
                alert("La géolocalisation n'est pas supportée par ce navigateur.");
            }
        }

        function addMarkersAndCircles(locations) {
            locations.forEach((location) => {
                // Ajouter un marqueur pour chaque emplacement
                new google.maps.Marker({
                    position: location,
                    map: map
                });

                // Ajouter un cercle de 2 mètres de rayon pour chaque emplacement
                location.circle = new google.maps.Circle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.35,
                    map: map,
                    center: location,
                    radius: 1 // 2 mètres
                });
            });
        }

        function showPosition(position) {
            const userCoords = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };

            if (!userMarker) {
                userMarker = new google.maps.Marker({
                    position: userCoords,
                    map: map,
                    title: "Votre position"
                });
            } else {
                userMarker.setPosition(userCoords);
            }

            map.setCenter(userCoords);

            let codes = [];

            locations.forEach((location) => {
                const distance = google.maps.geometry.spherical.computeDistanceBetween(
                    new google.maps.LatLng(userCoords.lat, userCoords.lng),
                    location.circle.getCenter()
                );

                if (distance <= location.circle.getRadius()) {
                    codes.push(location.code);
                }
            });

            if (codes.length > 0) {
                document.getElementById('codeText').innerText = codes.join(', ');
                document.getElementById('code').style.display = 'block';
            } else {
                document.getElementById('code').style.display = 'none';
            }

            updatePosition(userCoords);
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("L'utilisateur a refusé la demande de géolocalisation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Les informations de localisation ne sont pas disponibles.");
                    break;
                case error.TIMEOUT:
                    alert("La demande de localisation a expiré.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("Une erreur inconnue est survenue.");
                    break;
            }
        }

        function updatePosition(position) {
            // Fonction pour mettre à jour la position de l'utilisateur dans la base de données
            // Par exemple, ici vous pouvez envoyer les nouvelles coordonnées à votre serveur
            console.log("Position mise à jour : ", position);
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDt2I0f_PeVvfRj7MaIO2V_17hBeovo8OE&libraries=geometry&callback=initMap" async defer></script>
</body>
</html>
